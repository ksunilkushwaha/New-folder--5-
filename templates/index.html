{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
  <h2>Welcome, {{ user.username }}!</h2>
  <form method="post" action="{{ url_for('calculate') }}">
    <div id="earnings-section">
      <h4>Earnings</h4>
      <div class="row mb-2">
        <div class="col"><input type="text" name="earning_name_1" class="form-control" placeholder="Earning name" required></div>
        <div class="col"><input type="number" name="earning_amount_1" class="form-control" placeholder="Amount" required></div>
      </div>
      <button type="button" class="btn btn-secondary btn-sm" onclick="addEarning()">Add Earning</button>
    </div>
    <div id="expenses-section" class="mt-4">
      <h4>Expenses</h4>
      <div class="row mb-2">
        <div class="col"><input type="text" name="expense_name_1" class="form-control" placeholder="Expense name" required></div>
        <div class="col"><input type="number" name="expense_amount_1" class="form-control" placeholder="Amount" required></div>
      </div>
      <button type="button" class="btn btn-secondary btn-sm" onclick="addExpense()">Add Expense</button>
    </div>
    <button type="submit" class="btn btn-primary mt-4">Save Day</button>
  </form>
  <a href="{{ url_for('history') }}" class="btn btn-info mt-3">ðŸ“‹ View History</a>
</div>
<script>
let earningCount = 1;
let expenseCount = 1;
function addEarning() {
  earningCount++;
  const section = document.getElementById('earnings-section');
  const row = document.createElement('div');
  row.className = 'row mb-2';
  row.innerHTML = `<div class="col"><input type="text" name="earning_name_${earningCount}" class="form-control" placeholder="Earning name" required></div><div class="col"><input type="number" name="earning_amount_${earningCount}" class="form-control" placeholder="Amount" required></div>`;
  section.insertBefore(row, section.lastElementChild);
}
function addExpense() {
  expenseCount++;
  const section = document.getElementById('expenses-section');
  const row = document.createElement('div');
  row.className = 'row mb-2';
  row.innerHTML = `<div class="col"><input type="text" name="expense_name_${expenseCount}" class="form-control" placeholder="Expense name" required></div><div class="col"><input type="number" name="expense_amount_${expenseCount}" class="form-control" placeholder="Amount" required></div>`;
  section.insertBefore(row, section.lastElementChild);
}
</script>
{% endblock %}
